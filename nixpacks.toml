# Nixpacks configuration for Railway deployment
# better-sqlite3 requires native compilation tools

providers = ["node"]

[phases.setup]
nixPkgs = ["python3", "gcc", "gnumake"]
aptPkgs = ["build-essential"]

[phases.install]
cmds = [
  "npm install --prefix frontend",
  "npm run build --prefix frontend",
  "npm install --prefix backend"
]

[start]
cmd = "NODE_ENV=production node backend/server.js"
